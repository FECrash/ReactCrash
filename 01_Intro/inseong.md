# 리액트를 시작합니다!

## 리액트의 등장
현재 웹 애플리케이션에서 가장 핵심적인 역할을 하는 자바스크립트는 많은 프레임워크가 존재합니다. 대표적으로 Angular, Vue, React 등이 있죠.

자바스크립트로 만들어진 프레임워크는 주로 MVC, MVVM 아키텍처를 주로 사용(Angular는 MVW라는 걸 사용해요)합니다.

이들은 공통적으로 애플리케이션에 사용하는 데이터를 관리하는 모델(Model)과 이를 사용자에게 보여주는 뷰(View)를 지니고 있습니다.

프로그램이 사용자에게서 입력, 클릭 같은 작업을 받으면 기본적으로 모델 데이터를 조회하거나 수정한 뒤, 변경된 사항을 뷰에 반영합니다. 이를 변형(mutate)한다고 합니다.

애플리케이션의 규모가 커지면 커질 수록 변경된 부분을 어디서 어디까지, 어떻게 변경할 것이냐는 문제가 더욱 복잡해지며, 성능에도 문제를 미치게 됩니다.

이에 페이스북 개발 팀은, "뷰를 싹 날려버리고 새로 렌더링 해버리자"라는 생각을 하게 됩니다.

<br>

## 리액트란?
> 사용자 인터페이스를 만드는 자바스크립트 라이브러리로 View만 신경씁니다.

리액트의 가장 중요한 개념은 바로 컴포넌트(Component)입니다. 무엇을 하는 녀석일까요?
- 재사용이 가능한 API입니다.
- 해당 컴포넌트에서 자신의 외형, 기능 등을 정의할 수 있습니다.

컴포넌트가 중요한 개념인 이유는 바로 렌더링(rendering)에 있습니다. 기존의 프레임워크가 가진 뷰의 변형을 어떻게 렌더링하여 성능을 최적화하고 사용자가 쾌적하게 이용할 수 있을까요?
여기서 효율적인 렌더링의 수단이 되는 것이 컴포넌트이며, 리액트 컴포넌트는 최초로 실행하는 '초기 렌더링'과 컴포넌트의 데이터 변경으로 실행되는 '리렌더링' 개념이 등장합니다.

### 초기 렌더링
동서고금을 막론하고 처음 화면을 어떻게 보일지 정하는 **초기 렌더링** 이 필요합니다. 리액트는 `render()` 함수를 통해 이를 다룹니다.

render() 함수는 우리가 흔히 아는 HTML 형식의 문자열이 아닌 내부에 다른 컴포넌트를 포함하는 View의 정보를 담은 객체를 반환하며, 이를 재귀적으로 렌더링합니다. 순서를 생각해보자면 아래와 같겠죠.

```
렌더링 - HTML 마크업(문자열 형태의 HTML 코드를 생성) -> 특정 DOM에 해당 내용 주입 -> 화면에 출력
```

### 리렌더링
상술했듯 데이터 변경으로 리렌더링이 실행된다는 것은 알고 있습니다. 그렇다면 리렌더링은 어떻게 진행될까요?

리액트에서 View를 업데이트 할 때는 '조화(reconciliation) 과정을 거친다'고 표현합니다. 사용자 입장에서는 뷰가 '변형'하는 것 같지만, 실은 리액트에 의해 새로운 요소로 '대체'됩니다. 이 작업은 render() 함수가 담당합니다. 컴포넌트는 데이터를 업데이트한 뒤 새로운 데이터로 render() 함수를 호출합니다. 이때 render() 함수의 결과를 DOM에 바로 반영하지 않고 이전의 DOM과 새로운 DOM의 정보를 최소한의 연산으로 비교한 후 DOM 트리를 업데이트합니다.

<br>

## 특징
### 들어가기에 앞서, DOM이란
DOM(Document Object Model)은 무엇일까요? 단어의 의미 그대로입니다. **객체로 문서 구조를 표현하는 방법** 으로 XML, HTML로 작성합니다. DOM은 그 자체로 정적이므로 동적 UI에 최적화되어 있지 않지만, 자바스크립트는 DOM을 동적으로 만들 수 있습니다. 여기서 문제가 발생했죠.

대규모 웹 애플리케이션의 경우 데이터를 표현하는 요소가 수 백, 수 천개에 달하면 DOM에 직접 접근해 변화를 줄 때 성능 저하가 발생하기 시작합니다. 왜 이럴까요?

이유는 DOM 자체의 속도는 매우 빠르나, 웹 브라우저에서 DOM에 변화가 일어나면 일련의 과정이 연달아 일어나기 때문입니다.

```
CSS를 재연산 - 레이아웃 재구성 - 페이지 리페인트
```

당연히 많은 시간이 소요되겠죠. 결국 이를 해결하기 위해서는 DOM을 최소한으로 조작하고 작업하는 것입니다. 리액트는 Virtual DOM 방식을 도입하여 DOM을 추상화합니다. 이로써 DOM 처리 횟수가 최소화되며 효율적으로 진행되는 것이죠.

### Virtual DOM
> DOM을 추상화한 자바스크립트 객체로 실제 DOM의 가벼운 사본과도 같습니다.

리액트에서 실제 DOM을 업데이트 할 때는 아래의 세 가지 절차를 따릅니다.
1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교
3. 바뀐 부분만 실제 DOM에 적용

물론 Virtual DOM을 사용한다고 무조건 빠른 것은 아니에요. 리액트와 Virtual DOM이 제공하는 것은 '업데이트 처리 간결성'일 뿐입니다. 되려 소규모 웹 애플리케이션은 사용하지 않는 편이 성능상 좋을 수 있습니다.


### 그 외
리액트는 오직 뷰만 담당합니다. 즉, 프레임워크가 아닌 '라이브러리'입니다. 리액트 자체는 뷰만 신경 쓰는 라이브러리로 다른 기능은 직접 구현해야 합니다.

하지만 리액트 생태계는 이를 보완하기 위한 많은 라이브러리가 존재합니다. 상황에 따라 취향에 맞는 스택을 선택하여 사용하면 됩니다.